{"version":3,"names":["webexs","StatelessWebexPlugin","attrs","options","webex","parent","Error","collection","set","namespace","getNamespace","toLowerCase","config","logger","get","request","upload","readonly","prototype","AmpEvents"],"sources":["stateless-webex-plugin.js"],"sourcesContent":["import {readonly} from 'core-decorators';\nimport AmpEvents from 'ampersand-events';\n\n// hold onto weak references to parent' Webexs to help avoid retain cycles\nconst webexs = new WeakMap();\n\n/**\n * Base plugin class. Doesn't depend on Ampersand State\n */\nexport default class StatelessWebexPlugin {\n  /**\n   * The config for this plugin's namespace. If no namespace has been set\n   * returns all of webex's config.\n   * @type {Object}\n   */\n  get config() {\n    let namespace = this.getNamespace ? this.getNamespace() : this.namespace;\n\n    if (namespace) {\n      namespace = namespace.toLowerCase();\n\n      return this.webex.config[namespace];\n    }\n\n    return this.webex.config;\n  }\n\n  /**\n   * A reference to the webex logger.\n   * @type {Logger}\n   */\n  get logger() {\n    return this.webex.logger;\n  }\n\n  /**\n   * A reference to the main sdk instance\n   * @type {WebexCore}\n   */\n  get webex() {\n    return webexs.get(this);\n  }\n\n  @readonly\n  /**\n   * Mostly here for compatibility with legacy WebexPlugins.\n   * StatelessWebexPlugins will never have a state other than ready, however, if\n   * we implement stateful WebexPlugins as es6 classes, they may have the option\n   * to have ready be false\n   * @private\n   * @type {boolean}\n   */\n    ready = true;\n\n  /**\n   * Constructor. One of attrs.webex or options.parent is required\n   * @param {Object} attrs\n   * @param {WebexCore} [attrs.webex]\n   * @param {Object} options\n   * @param {WebexCore} [options.parent]\n   */\n  constructor(attrs = {}, options = {}) {\n    let webex = attrs.webex || options.parent;\n\n    if (!webex) {\n      throw new Error('One of `attrs.webex` or `options.parent` must be supplied when initializing a StatelessWebexPlugin');\n    }\n\n    while (webex.parent || webex.collection) {\n      webex = webex.parent || webex.collection;\n    }\n    webexs.set(this, webex);\n  }\n\n  /**\n   * Proxies to {@link WebexPlugin#webex}'s `request()` method.\n   * @see WebexCore#request\n   * @param {Array<mixed>} args\n   * @returns {Promise}\n   */\n  request(...args) {\n    return this.webex.request(...args);\n  }\n\n  /**\n   * Proxies to {@link WebexPlugin#webex}'s `upload()` method.\n   * @see WebexCore#upload\n   * @param {Array<mixed>} args\n   * @returns {Promise}\n   */\n  upload(...args) {\n    return this.webex.upload(...args);\n  }\n}\n\nObject.assign(StatelessWebexPlugin.prototype, AmpEvents);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AAEA;AACA,IAAMA,MAAM,GAAG,sBAAf;AAEA;AACA;AACA;;IACqBC,oB;EA6CnB;AACF;AACA;AACA;AACA;AACA;AACA;EACE,gCAAsC;IAAA,IAA1BC,KAA0B,uEAAlB,EAAkB;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IAAA;IAAA;IACpC,IAAIC,KAAK,GAAGF,KAAK,CAACE,KAAN,IAAeD,OAAO,CAACE,MAAnC;;IAEA,IAAI,CAACD,KAAL,EAAY;MACV,MAAM,IAAIE,KAAJ,CAAU,oGAAV,CAAN;IACD;;IAED,OAAOF,KAAK,CAACC,MAAN,IAAgBD,KAAK,CAACG,UAA7B,EAAyC;MACvCH,KAAK,GAAGA,KAAK,CAACC,MAAN,IAAgBD,KAAK,CAACG,UAA9B;IACD;;IACDP,MAAM,CAACQ,GAAP,CAAW,IAAX,EAAiBJ,KAAjB;EACD;EAED;AACF;AACA;AACA;AACA;AACA;;;;;;IArEE;AACF;AACA;AACA;AACA;IACE,eAAa;MACX,IAAIK,SAAS,GAAG,KAAKC,YAAL,GAAoB,KAAKA,YAAL,EAApB,GAA0C,KAAKD,SAA/D;;MAEA,IAAIA,SAAJ,EAAe;QACbA,SAAS,GAAGA,SAAS,CAACE,WAAV,EAAZ;QAEA,OAAO,KAAKP,KAAL,CAAWQ,MAAX,CAAkBH,SAAlB,CAAP;MACD;;MAED,OAAO,KAAKL,KAAL,CAAWQ,MAAlB;IACD;IAED;AACF;AACA;AACA;;;;SACE,eAAa;MACX,OAAO,KAAKR,KAAL,CAAWS,MAAlB;IACD;IAED;AACF;AACA;AACA;;;;SACE,eAAY;MACV,OAAOb,MAAM,CAACc,GAAP,CAAW,IAAX,CAAP;IACD;;;WAuCD,mBAAiB;MAAA;;MACf,OAAO,oBAAKV,KAAL,EAAWW,OAAX,8BAAP;IACD;IAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,kBAAgB;MAAA;;MACd,OAAO,qBAAKX,KAAL,EAAWY,MAAX,+BAAP;IACD;;;wFAjDAC,wB;;;;;WASS,I;;;;AA2CZ,qBAAchB,oBAAoB,CAACiB,SAAnC,EAA8CC,wBAA9C"}