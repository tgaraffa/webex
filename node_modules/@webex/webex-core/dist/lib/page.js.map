{"version":3,"names":["itemsMap","linksMap","webexsMap","Page","res","webex","set","body","items","parseLinkHeaders","headers","link","get","length","getLink","hasLink","request","uri","links","then","Boolean","i","next","value","done","linkHeaders","reduce","linkHeader","split","replace","rel"],"sources":["page.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nconst itemsMap = new WeakMap();\nconst linksMap = new WeakMap();\nconst webexsMap = new WeakMap();\n\n/**\n * @class Page\n */\nexport default class Page {\n  /**\n   * @type {Array}\n   */\n  get items() {\n    return itemsMap.get(this);\n  }\n\n  /**\n   * @type {number}\n   */\n  get length() {\n    return this.items.length;\n  }\n\n  /**\n   * @private\n   * @type {Object}\n   */\n  get links() {\n    return linksMap.get(this);\n  }\n\n  /**\n   * @private\n   * @type {ProxyWebex}\n   */\n  get webex() {\n    return webexsMap.get(this);\n  }\n\n  /**\n   * @constructs {Page}\n   * @param {HttpResponse} res\n   * @param {ProxyWebex} webex\n   * @returns {Page}\n   */\n  constructor(res, webex) {\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n\n    return this;\n  }\n\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n  static parseLinkHeaders(linkHeaders) {\n    if (!linkHeaders) {\n      return {};\n    }\n\n    linkHeaders = Array.isArray(linkHeaders) ? linkHeaders : [linkHeaders];\n\n    return linkHeaders.reduce((links, linkHeader) => {\n      linkHeader = linkHeader.split(';');\n      const link = linkHeader[0]\n        .replace('<', '')\n        .replace('>', '');\n      const rel = linkHeader[1]\n        .split('=')[1]\n        .replace(/\"/g, '');\n\n      links[rel] = link;\n\n      return links;\n    }, {});\n  }\n\n  /**\n   * Get next page\n   * @returns {Function}\n   */\n  next() {\n    return this.getLink('next');\n  }\n\n  /**\n   * Indicates if there's another page\n   * @returns {Boolean}\n   */\n  hasNext() {\n    return this.hasLink('next');\n  }\n\n  /**\n   * Get previous page\n   * @returns {Page}\n   */\n  previous() {\n    return this.getLink('previous');\n  }\n\n  /**\n   * Indicates if there is a previous Page\n   * @returns {Boolean}\n   */\n  hasPrevious() {\n    return this.hasLink('previous');\n  }\n\n  /**\n   * Retrieves the `Page` at url specified by `link`\n   * @param {string} link Specifies which link header to return\n   * @private\n   * @returns {Promise<Page>}\n   */\n  getLink(link) {\n    return this.webex.request({\n      uri: this.links[link]\n    })\n      .then((res) => new Page(res, this.webex));\n  }\n\n  /**\n   * Indicates if the specified link is in the link header\n   * @param {string} link\n   * @private\n   * @returns {Boolean}\n   */\n  hasLink(link) {\n    return Boolean(this.links[link]);\n  }\n\n  /**\n   * Iterator\n   * @returns {Object}\n   */\n  [Symbol.iterator]() {\n    let i = -1;\n\n    return {\n      next: () => {\n        i += 1;\n        if (i < this.length) {\n          return {\n            value: this.items[i]\n          };\n        }\n\n        return {done: true};\n      }\n    };\n  }\n}\n"],"mappings":"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"}