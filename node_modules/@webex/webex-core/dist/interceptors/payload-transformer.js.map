{"version":3,"names":["PayloadTransformerInterceptor","options","noTransform","webex","transform","response","disableTransform","reason","then","r","reject","Interceptor"],"sources":["payload-transformer.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {Interceptor} from '@webex/http-core';\n\n/**\n * @class\n */\nexport default class PayloadTransformerInterceptor extends Interceptor {\n  /**\n   * @param {Object} options\n   * @returns {PayloadTransformerInterceptor}\n   */\n  static create() {\n    return new PayloadTransformerInterceptor({webex: this});\n  }\n\n  /**\n   * @see Interceptor#onRequest\n   * @param {Object} options\n   * @returns {Object}\n   */\n  onRequest(options) {\n    if (options.noTransform) {\n      return options;\n    }\n\n    return this.webex.transform('outbound', options);\n  }\n\n  /**\n   * @see Interceptor#onResponse\n   * @param {Object} options\n   * @param {HttpResponse} response\n   * @returns {Object}\n   */\n  onResponse(options, response) {\n    if (options.disableTransform) {\n      return response;\n    }\n\n    return this.webex.transform('inbound', response);\n  }\n\n  /**\n   * @see Interceptor#onResponseError\n   * @param {Object} options\n   * @param {Error} reason\n   * @returns {Object}\n   */\n  onResponseError(options, reason) {\n    return this.webex.transform('inbound', reason)\n      .then((r) => Promise.reject(r || reason));\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;;;;;AAEA;AACA;AACA;IACqBA,6B;;;;;;;;;;;;;IASnB;AACF;AACA;AACA;AACA;IACE,mBAAUC,OAAV,EAAmB;MACjB,IAAIA,OAAO,CAACC,WAAZ,EAAyB;QACvB,OAAOD,OAAP;MACD;;MAED,OAAO,KAAKE,KAAL,CAAWC,SAAX,CAAqB,UAArB,EAAiCH,OAAjC,CAAP;IACD;IAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,oBAAWA,OAAX,EAAoBI,QAApB,EAA8B;MAC5B,IAAIJ,OAAO,CAACK,gBAAZ,EAA8B;QAC5B,OAAOD,QAAP;MACD;;MAED,OAAO,KAAKF,KAAL,CAAWC,SAAX,CAAqB,SAArB,EAAgCC,QAAhC,CAAP;IACD;IAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,yBAAgBJ,OAAhB,EAAyBM,MAAzB,EAAiC;MAC/B,OAAO,KAAKJ,KAAL,CAAWC,SAAX,CAAqB,SAArB,EAAgCG,MAAhC,EACJC,IADI,CACC,UAACC,CAAD;QAAA,OAAO,iBAAQC,MAAR,CAAeD,CAAC,IAAIF,MAApB,CAAP;MAAA,CADD,CAAP;IAED;;;;IA5CD;AACF;AACA;AACA;IACE,kBAAgB;MACd,OAAO,IAAIP,6BAAJ,CAAkC;QAACG,KAAK,EAAE;MAAR,CAAlC,CAAP;IACD;;;EAPwDQ,qB"}