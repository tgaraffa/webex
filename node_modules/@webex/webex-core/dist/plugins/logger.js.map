{"version":3,"names":["precedence","error","warn","info","debug","trace","wrapConsoleMethod","level","impls","slice","console","pop","wrappedConsoleMethod","args","process","env","NODE_ENV","webex","internal","device","url","unshift","Logger","WebexPlugin","extend","namespace","log","registerPlugin"],"sources":["logger.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\nimport WebexPlugin from '../lib/webex-plugin';\nimport {registerPlugin} from '../webex-core';\n\nconst precedence = {\n  error: ['log'],\n  warn: ['error', 'log'],\n  info: ['log'],\n  debug: ['info', 'log'],\n  trace: ['debug', 'info', 'log']\n};\n\n/**\n * Assigns the specified console method to Logger; uses `precedence` to fallback\n * to other console methods if the current environment doesn't provide the\n * specified level.\n * @param {string} level\n * @returns {Function}\n */\nfunction wrapConsoleMethod(level) {\n  /* eslint no-console: [0] */\n  let impls = precedence[level];\n\n  if (impls) {\n    impls = impls.slice();\n    while (!console[level]) {\n      level = impls.pop();\n    }\n  }\n\n  return function wrappedConsoleMethod(...args) {\n    /* eslint no-invalid-this: [0] */\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV === 'test' && this.webex && this.webex.internal.device && this.webex.internal.device.url) {\n      args.unshift(this.webex.internal.device.url.slice(-3));\n    }\n    console[level](...args);\n  };\n}\n\nconst Logger = WebexPlugin.extend({\n  namespace: 'Logger',\n  error: wrapConsoleMethod('error'),\n  warn: wrapConsoleMethod('warn'),\n  log: wrapConsoleMethod('log'),\n  info: wrapConsoleMethod('info'),\n  debug: wrapConsoleMethod('debug'),\n  trace: wrapConsoleMethod('trace')\n});\n\nregisterPlugin('logger', Logger);\n\nexport default Logger;\n"],"mappings":";;;;;;;;;;;;AAGA;;AACA;;AAJA;AACA;AACA;AAIA,IAAMA,UAAU,GAAG;EACjBC,KAAK,EAAE,CAAC,KAAD,CADU;EAEjBC,IAAI,EAAE,CAAC,OAAD,EAAU,KAAV,CAFW;EAGjBC,IAAI,EAAE,CAAC,KAAD,CAHW;EAIjBC,KAAK,EAAE,CAAC,MAAD,EAAS,KAAT,CAJU;EAKjBC,KAAK,EAAE,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB;AALU,CAAnB;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,iBAAT,CAA2BC,KAA3B,EAAkC;EAChC;EACA,IAAIC,KAAK,GAAGR,UAAU,CAACO,KAAD,CAAtB;;EAEA,IAAIC,KAAJ,EAAW;IACTA,KAAK,GAAGA,KAAK,CAACC,KAAN,EAAR;;IACA,OAAO,CAACC,OAAO,CAACH,KAAD,CAAf,EAAwB;MACtBA,KAAK,GAAGC,KAAK,CAACG,GAAN,EAAR;IACD;EACF;;EAED,OAAO,SAASC,oBAAT,GAAuC;IAAA;;IAAA,kCAANC,IAAM;MAANA,IAAM;IAAA;;IAC5C;;IACA;IACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAAzB,IAAmC,KAAKC,KAAxC,IAAiD,KAAKA,KAAL,CAAWC,QAAX,CAAoBC,MAArE,IAA+E,KAAKF,KAAL,CAAWC,QAAX,CAAoBC,MAApB,CAA2BC,GAA9G,EAAmH;MACjHP,IAAI,CAACQ,OAAL,CAAa,KAAKJ,KAAL,CAAWC,QAAX,CAAoBC,MAApB,CAA2BC,GAA3B,CAA+BX,KAA/B,CAAqC,CAAC,CAAtC,CAAb;IACD;;IACD,YAAAC,OAAO,EAACH,KAAD,CAAP,iBAAkBM,IAAlB;EACD,CAPD;AAQD;;AAED,IAAMS,MAAM,GAAGC,oBAAA,CAAYC,MAAZ,CAAmB;EAChCC,SAAS,EAAE,QADqB;EAEhCxB,KAAK,EAAEK,iBAAiB,CAAC,OAAD,CAFQ;EAGhCJ,IAAI,EAAEI,iBAAiB,CAAC,MAAD,CAHS;EAIhCoB,GAAG,EAAEpB,iBAAiB,CAAC,KAAD,CAJU;EAKhCH,IAAI,EAAEG,iBAAiB,CAAC,MAAD,CALS;EAMhCF,KAAK,EAAEE,iBAAiB,CAAC,OAAD,CANQ;EAOhCD,KAAK,EAAEC,iBAAiB,CAAC,OAAD,CAPQ;EAAA;AAAA,CAAnB,CAAf;;AAUA,IAAAqB,yBAAA,EAAe,QAAf,EAAyBL,MAAzB;eAEeA,M"}