{"version":3,"names":["InfoUtils","parse","info","roles","isJoined","parsed","policy","parsePolicy","moderator","parseModerator","coHost","parseCoHost","userDisplayHints","includes","SELF_ROLES","COHOST","MODERATOR","sipUri","meetingId","meetingNumber","parseDisplayHintSection","displayHintKey","displayHints","length","forEach","key","DISPLAY_HINTS","LOWER_SOMEONE_ELSES_HAND","isLocked","LOCK_STATUS_LOCKED","isUnlocked","LOCK_STATUS_UNLOCKED","getInfos","oldInfo","newInfo","previous","current","updates"],"sources":["infoUtils.js"],"sourcesContent":["\nimport {SELF_ROLES, DISPLAY_HINTS} from '../constants';\n\nconst InfoUtils = {};\n\nInfoUtils.parse = (info, roles, isJoined = true) => {\n  const parsed = {\n    policy: InfoUtils.parsePolicy(info),\n    moderator: InfoUtils.parseModerator(info),\n    coHost: InfoUtils.parseCoHost(info),\n  };\n\n  let userDisplayHints = isJoined ? {...parsed.policy} : {};\n\n  if (roles.includes(SELF_ROLES.COHOST)) {\n    userDisplayHints = {...userDisplayHints, ...parsed.coHost};\n  }\n\n  if (roles.includes(SELF_ROLES.MODERATOR)) {\n    userDisplayHints = {...userDisplayHints, ...parsed.moderator};\n  }\n\n  parsed.userDisplayHints = Object.keys(userDisplayHints);\n\n  if (info.sipUri) {\n    parsed.sipUri = info.sipUri;\n  }\n\n  if (info.meetingId) {\n    parsed.meetingNumber = info.meetingId;\n  }\n\n  return parsed;\n};\n\nInfoUtils.parseDisplayHintSection = (info, displayHintKey) => {\n  const displayHints = {};\n\n  if (info && info.displayHints && info.displayHints[displayHintKey] && info.displayHints[displayHintKey].length > 0) {\n    info.displayHints[displayHintKey].forEach((key) => {\n      displayHints[key] = true;\n    });\n  }\n\n  return displayHints;\n};\n\nInfoUtils.parsePolicy = (info) => InfoUtils.parseDisplayHintSection(info, 'joined');\n\nInfoUtils.parseModerator = (info) => {\n  const displayHints = InfoUtils.parseDisplayHintSection(info, 'moderator');\n\n  return {...displayHints, [DISPLAY_HINTS.LOWER_SOMEONE_ELSES_HAND]: true};\n};\n\nInfoUtils.parseCoHost = (info) => {\n  const displayHints = InfoUtils.parseDisplayHintSection(info, 'coHost');\n\n  return {...displayHints, [DISPLAY_HINTS.LOWER_SOMEONE_ELSES_HAND]: true};\n};\n\nInfoUtils.isLocked = (policy) => policy.LOCK_STATUS_LOCKED || false;\n\nInfoUtils.isUnlocked = (policy) => policy.LOCK_STATUS_UNLOCKED || false;\n\nInfoUtils.getInfos = (oldInfo, newInfo, roles, isJoined) => {\n  let previous = null;\n\n  if (oldInfo) {\n    previous = oldInfo;\n  }\n  const current = newInfo && InfoUtils.parse(newInfo, roles, isJoined);\n  const updates = {};\n\n  if (current) {\n    current.isLocked = InfoUtils.isLocked(current.policy);\n    current.isUnlocked = InfoUtils.isUnlocked(current.policy);\n\n    if (previous && previous.isUnlocked && current.isLocked || !previous && current.isLocked) {\n      updates.isLocked = current.isLocked;\n    }\n    if (previous && previous.isLocked && current.isUnlocked || !previous && current.isUnlocked) {\n      updates.isUnlocked = current.isUnlocked;\n    }\n  }\n\n  return {\n    previous,\n    current,\n    updates\n  };\n};\n\nexport default InfoUtils;\n"],"mappings":"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"}