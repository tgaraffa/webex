{"version":3,"names":["MembersUtil","generateAddMemberOptions","invitee","locusUrl","alertIfActive","generateAdmitMemberOptions","memberIds","getAddMemberBody","options","invitees","address","emailAddress","email","phoneNumber","getAdmitMemberRequestBody","admit","participantIds","getAdmitMemberRequestParams","format","body","uri","CONTROLS","method","HTTP_VERBS","PUT","getAddMemberRequestParams","requestParams","isInvalidInvitee","DIALER_REGEX","E164_FORMAT","test","VALID_EMAIL_ADDRESS","getRemoveMemberRequestParams","reason","PARTICIPANT","memberId","LEAVE","generateTransferHostMemberOptions","transfer","moderator","generateRemoveMemberOptions","removal","_FORCED_","generateMuteMemberOptions","status","muted","generateRaiseHandMemberOptions","raised","generateLowerAllHandsMemberOptions","requestingParticipantId","getMuteMemberRequestParams","audio","PATCH","getRaiseHandMemberRequestParams","hand","getLowerAllHandsMemberRequestParams","getTransferHostToMemberRequestParams","role","genderateSendDTMFOptions","url","tones","generateSendDTMFRequestParams","device","dtmf","correlationId","uuid","v4","direction","SEND_DTMF_ENDPOINT","POST","cancelPhoneInviteOptions","generateCancelInviteRequestParams","actionType","_REMOVE_"],"sources":["util.js"],"sourcesContent":["import uuid from 'uuid';\n\nimport {\n  HTTP_VERBS,\n  CONTROLS,\n  _FORCED_,\n  LEAVE,\n  PARTICIPANT,\n  VALID_EMAIL_ADDRESS,\n  DIALER_REGEX,\n  SEND_DTMF_ENDPOINT,\n  _REMOVE_\n} from '../constants';\n\nconst MembersUtil = {};\n\n/**\n * @param {Object} invitee with emailAddress, email or phoneNumber\n * @param {String} locusUrl\n * @param {Boolean} alertIfActive\n * @returns {Object} the format object\n */\nMembersUtil.generateAddMemberOptions = (invitee, locusUrl, alertIfActive) => ({\n  invitee,\n  locusUrl,\n  alertIfActive\n});\n\n/**\n * @param {Array} memberIds\n * @param {String} locusUrl\n * @returns {Object} the format object\n */\nMembersUtil.generateAdmitMemberOptions = (memberIds, locusUrl) => ({\n  locusUrl,\n  memberIds\n});\n\n/**\n * @param {Object} options with {invitee: {emailAddress, email, phoneNumber}, alertIfActive}\n * @returns {Object} with {invitees: [{address}], alertIfActive}\n */\nMembersUtil.getAddMemberBody = (options) => ({\n  invitees: [\n    {\n      address: options.invitee.emailAddress || options.invitee.email || options.invitee.phoneNumber\n    }\n  ],\n  alertIfActive: options.alertIfActive\n});\n\n/**\n * @param {Object} options with {memberIds}\n * @returns {Object} admit with {memberIds}\n */\nMembersUtil.getAdmitMemberRequestBody = (options) => ({\n  admit: {participantIds: options.memberIds}\n});\n\n/**\n * @param {Object} format with {memberIds, locusUrl}\n * @returns {Object} the request parameters (method, uri, body) needed to make a admitMember request\n */\nMembersUtil.getAdmitMemberRequestParams = (format) => {\n  const body = MembersUtil.getAdmitMemberRequestBody(format);\n  const uri = `${format.locusUrl}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body\n  };\n};\n\n/**\n * @param {Object} format with {invitee {emailAddress, email, phoneNumber}, locusUrl, alertIfActive}\n * @returns {Object} the request parameters (method, uri, body) needed to make a addMember request\n */\nMembersUtil.getAddMemberRequestParams = (format) => {\n  const body = MembersUtil.getAddMemberBody(format);\n  const requestParams = {\n    method: HTTP_VERBS.PUT,\n    uri: format.locusUrl,\n    body\n  };\n\n  return requestParams;\n};\n\nMembersUtil.isInvalidInvitee = (invitee) => {\n  if (!(invitee && (invitee.email || invitee.emailAddress || invitee.phoneNumber))) {\n    return true;\n  }\n\n  if (invitee.phoneNumber) {\n    return !DIALER_REGEX.E164_FORMAT.test(invitee.phoneNumber);\n  }\n\n  return !VALID_EMAIL_ADDRESS.test(invitee.email || invitee.emailAddress);\n};\n\nMembersUtil.getRemoveMemberRequestParams = (options) => {\n  const body = {\n    reason: options.reason\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${LEAVE}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body\n  };\n};\n\nMembersUtil.generateTransferHostMemberOptions = (transfer, moderator, locusUrl) => ({\n  moderator,\n  locusUrl,\n  memberId: transfer\n});\n\nMembersUtil.generateRemoveMemberOptions = (removal, locusUrl) => ({\n  reason: _FORCED_,\n  memberId: removal,\n  locusUrl\n});\n\nMembersUtil.generateMuteMemberOptions = (memberId, status, locusUrl) => ({\n  memberId,\n  muted: status,\n  locusUrl\n});\n\nMembersUtil.generateRaiseHandMemberOptions = (memberId, status, locusUrl) => ({\n  memberId,\n  raised: status,\n  locusUrl\n});\n\nMembersUtil.generateLowerAllHandsMemberOptions = (requestingParticipantId, locusUrl) => ({\n  requestingParticipantId,\n  locusUrl\n});\n\nMembersUtil.getMuteMemberRequestParams = (options) => {\n  const body = {\n    audio: {\n      muted: options.muted\n    }\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nMembersUtil.getRaiseHandMemberRequestParams = (options) => {\n  const body = {\n    hand: {\n      raised: options.raised\n    }\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nMembersUtil.getLowerAllHandsMemberRequestParams = (options) => {\n  const body = {\n    hand: {\n      raised: false\n    },\n    requestingParticipantId: options.requestingParticipantId\n  };\n  const uri = `${options.locusUrl}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nMembersUtil.getTransferHostToMemberRequestParams = (options) => {\n  const body = {\n    role: {\n      moderator: options.moderator\n    }\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nMembersUtil.genderateSendDTMFOptions = (url, tones, memberId, locusUrl) => ({\n  url,\n  tones,\n  memberId,\n  locusUrl\n});\n\nMembersUtil.generateSendDTMFRequestParams = ({\n  url, tones, memberId, locusUrl\n}) => {\n  const body = {\n    device: {\n      url\n    },\n    memberId,\n    dtmf: {\n      correlationId: uuid.v4(),\n      tones,\n      direction: 'transmit'\n    }\n  };\n  const uri = `${locusUrl}/${PARTICIPANT}/${memberId}/${SEND_DTMF_ENDPOINT}`;\n\n  return {\n    method: HTTP_VERBS.POST,\n    uri,\n    body\n  };\n};\n\nMembersUtil.cancelPhoneInviteOptions = (invitee, locusUrl) => ({\n  invitee,\n  locusUrl\n});\n\nMembersUtil.generateCancelInviteRequestParams = (options) => {\n  const body = {\n    actionType: _REMOVE_,\n    invitees: [\n      {\n        address: options.invitee.phoneNumber\n      }\n    ]\n  };\n  const requestParams = {\n    method: HTTP_VERBS.PUT,\n    uri: options.locusUrl,\n    body\n  };\n\n  return requestParams;\n};\n\nexport default MembersUtil;\n"],"mappings":";;;;;;;;;;;;AAAA;;AAEA;;AAYA,IAAMA,WAAW,GAAG,EAApB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACAA,WAAW,CAACC,wBAAZ,GAAuC,UAACC,OAAD,EAAUC,QAAV,EAAoBC,aAApB;EAAA,OAAuC;IAC5EF,OAAO,EAAPA,OAD4E;IAE5EC,QAAQ,EAARA,QAF4E;IAG5EC,aAAa,EAAbA;EAH4E,CAAvC;AAAA,CAAvC;AAMA;AACA;AACA;AACA;AACA;;;AACAJ,WAAW,CAACK,0BAAZ,GAAyC,UAACC,SAAD,EAAYH,QAAZ;EAAA,OAA0B;IACjEA,QAAQ,EAARA,QADiE;IAEjEG,SAAS,EAATA;EAFiE,CAA1B;AAAA,CAAzC;AAKA;AACA;AACA;AACA;;;AACAN,WAAW,CAACO,gBAAZ,GAA+B,UAACC,OAAD;EAAA,OAAc;IAC3CC,QAAQ,EAAE,CACR;MACEC,OAAO,EAAEF,OAAO,CAACN,OAAR,CAAgBS,YAAhB,IAAgCH,OAAO,CAACN,OAAR,CAAgBU,KAAhD,IAAyDJ,OAAO,CAACN,OAAR,CAAgBW;IADpF,CADQ,CADiC;IAM3CT,aAAa,EAAEI,OAAO,CAACJ;EANoB,CAAd;AAAA,CAA/B;AASA;AACA;AACA;AACA;;;AACAJ,WAAW,CAACc,yBAAZ,GAAwC,UAACN,OAAD;EAAA,OAAc;IACpDO,KAAK,EAAE;MAACC,cAAc,EAAER,OAAO,CAACF;IAAzB;EAD6C,CAAd;AAAA,CAAxC;AAIA;AACA;AACA;AACA;;;AACAN,WAAW,CAACiB,2BAAZ,GAA0C,UAACC,MAAD,EAAY;EACpD,IAAMC,IAAI,GAAGnB,WAAW,CAACc,yBAAZ,CAAsCI,MAAtC,CAAb;EACA,IAAME,GAAG,aAAMF,MAAM,CAACf,QAAb,cAAyBkB,mBAAzB,CAAT;EAEA,OAAO;IACLC,MAAM,EAAEC,qBAAA,CAAWC,GADd;IAELJ,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CATD;AAWA;AACA;AACA;AACA;;;AACAnB,WAAW,CAACyB,yBAAZ,GAAwC,UAACP,MAAD,EAAY;EAClD,IAAMC,IAAI,GAAGnB,WAAW,CAACO,gBAAZ,CAA6BW,MAA7B,CAAb;EACA,IAAMQ,aAAa,GAAG;IACpBJ,MAAM,EAAEC,qBAAA,CAAWC,GADC;IAEpBJ,GAAG,EAAEF,MAAM,CAACf,QAFQ;IAGpBgB,IAAI,EAAJA;EAHoB,CAAtB;EAMA,OAAOO,aAAP;AACD,CATD;;AAWA1B,WAAW,CAAC2B,gBAAZ,GAA+B,UAACzB,OAAD,EAAa;EAC1C,IAAI,EAAEA,OAAO,KAAKA,OAAO,CAACU,KAAR,IAAiBV,OAAO,CAACS,YAAzB,IAAyCT,OAAO,CAACW,WAAtD,CAAT,CAAJ,EAAkF;IAChF,OAAO,IAAP;EACD;;EAED,IAAIX,OAAO,CAACW,WAAZ,EAAyB;IACvB,OAAO,CAACe,uBAAA,CAAaC,WAAb,CAAyBC,IAAzB,CAA8B5B,OAAO,CAACW,WAAtC,CAAR;EACD;;EAED,OAAO,CAACkB,8BAAA,CAAoBD,IAApB,CAAyB5B,OAAO,CAACU,KAAR,IAAiBV,OAAO,CAACS,YAAlD,CAAR;AACD,CAVD;;AAYAX,WAAW,CAACgC,4BAAZ,GAA2C,UAACxB,OAAD,EAAa;EACtD,IAAMW,IAAI,GAAG;IACXc,MAAM,EAAEzB,OAAO,CAACyB;EADL,CAAb;EAGA,IAAMb,GAAG,aAAMZ,OAAO,CAACL,QAAd,cAA0B+B,sBAA1B,cAAyC1B,OAAO,CAAC2B,QAAjD,cAA6DC,gBAA7D,CAAT;EAEA,OAAO;IACLd,MAAM,EAAEC,qBAAA,CAAWC,GADd;IAELJ,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CAXD;;AAaAnB,WAAW,CAACqC,iCAAZ,GAAgD,UAACC,QAAD,EAAWC,SAAX,EAAsBpC,QAAtB;EAAA,OAAoC;IAClFoC,SAAS,EAATA,SADkF;IAElFpC,QAAQ,EAARA,QAFkF;IAGlFgC,QAAQ,EAAEG;EAHwE,CAApC;AAAA,CAAhD;;AAMAtC,WAAW,CAACwC,2BAAZ,GAA0C,UAACC,OAAD,EAAUtC,QAAV;EAAA,OAAwB;IAChE8B,MAAM,EAAES,mBADwD;IAEhEP,QAAQ,EAAEM,OAFsD;IAGhEtC,QAAQ,EAARA;EAHgE,CAAxB;AAAA,CAA1C;;AAMAH,WAAW,CAAC2C,yBAAZ,GAAwC,UAACR,QAAD,EAAWS,MAAX,EAAmBzC,QAAnB;EAAA,OAAiC;IACvEgC,QAAQ,EAARA,QADuE;IAEvEU,KAAK,EAAED,MAFgE;IAGvEzC,QAAQ,EAARA;EAHuE,CAAjC;AAAA,CAAxC;;AAMAH,WAAW,CAAC8C,8BAAZ,GAA6C,UAACX,QAAD,EAAWS,MAAX,EAAmBzC,QAAnB;EAAA,OAAiC;IAC5EgC,QAAQ,EAARA,QAD4E;IAE5EY,MAAM,EAAEH,MAFoE;IAG5EzC,QAAQ,EAARA;EAH4E,CAAjC;AAAA,CAA7C;;AAMAH,WAAW,CAACgD,kCAAZ,GAAiD,UAACC,uBAAD,EAA0B9C,QAA1B;EAAA,OAAwC;IACvF8C,uBAAuB,EAAvBA,uBADuF;IAEvF9C,QAAQ,EAARA;EAFuF,CAAxC;AAAA,CAAjD;;AAKAH,WAAW,CAACkD,0BAAZ,GAAyC,UAAC1C,OAAD,EAAa;EACpD,IAAMW,IAAI,GAAG;IACXgC,KAAK,EAAE;MACLN,KAAK,EAAErC,OAAO,CAACqC;IADV;EADI,CAAb;EAKA,IAAMzB,GAAG,aAAMZ,OAAO,CAACL,QAAd,cAA0B+B,sBAA1B,cAAyC1B,OAAO,CAAC2B,QAAjD,cAA6Dd,mBAA7D,CAAT;EAEA,OAAO;IACLC,MAAM,EAAEC,qBAAA,CAAW6B,KADd;IAELhC,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CAbD;;AAeAnB,WAAW,CAACqD,+BAAZ,GAA8C,UAAC7C,OAAD,EAAa;EACzD,IAAMW,IAAI,GAAG;IACXmC,IAAI,EAAE;MACJP,MAAM,EAAEvC,OAAO,CAACuC;IADZ;EADK,CAAb;EAKA,IAAM3B,GAAG,aAAMZ,OAAO,CAACL,QAAd,cAA0B+B,sBAA1B,cAAyC1B,OAAO,CAAC2B,QAAjD,cAA6Dd,mBAA7D,CAAT;EAEA,OAAO;IACLC,MAAM,EAAEC,qBAAA,CAAW6B,KADd;IAELhC,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CAbD;;AAeAnB,WAAW,CAACuD,mCAAZ,GAAkD,UAAC/C,OAAD,EAAa;EAC7D,IAAMW,IAAI,GAAG;IACXmC,IAAI,EAAE;MACJP,MAAM,EAAE;IADJ,CADK;IAIXE,uBAAuB,EAAEzC,OAAO,CAACyC;EAJtB,CAAb;EAMA,IAAM7B,GAAG,aAAMZ,OAAO,CAACL,QAAd,cAA0BkB,mBAA1B,CAAT;EAEA,OAAO;IACLC,MAAM,EAAEC,qBAAA,CAAW6B,KADd;IAELhC,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CAdD;;AAgBAnB,WAAW,CAACwD,oCAAZ,GAAmD,UAAChD,OAAD,EAAa;EAC9D,IAAMW,IAAI,GAAG;IACXsC,IAAI,EAAE;MACJlB,SAAS,EAAE/B,OAAO,CAAC+B;IADf;EADK,CAAb;EAKA,IAAMnB,GAAG,aAAMZ,OAAO,CAACL,QAAd,cAA0B+B,sBAA1B,cAAyC1B,OAAO,CAAC2B,QAAjD,cAA6Dd,mBAA7D,CAAT;EAEA,OAAO;IACLC,MAAM,EAAEC,qBAAA,CAAW6B,KADd;IAELhC,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CAbD;;AAeAnB,WAAW,CAAC0D,wBAAZ,GAAuC,UAACC,GAAD,EAAMC,KAAN,EAAazB,QAAb,EAAuBhC,QAAvB;EAAA,OAAqC;IAC1EwD,GAAG,EAAHA,GAD0E;IAE1EC,KAAK,EAALA,KAF0E;IAG1EzB,QAAQ,EAARA,QAH0E;IAI1EhC,QAAQ,EAARA;EAJ0E,CAArC;AAAA,CAAvC;;AAOAH,WAAW,CAAC6D,6BAAZ,GAA4C,gBAEtC;EAAA,IADJF,GACI,QADJA,GACI;EAAA,IADCC,KACD,QADCA,KACD;EAAA,IADQzB,QACR,QADQA,QACR;EAAA,IADkBhC,QAClB,QADkBA,QAClB;EACJ,IAAMgB,IAAI,GAAG;IACX2C,MAAM,EAAE;MACNH,GAAG,EAAHA;IADM,CADG;IAIXxB,QAAQ,EAARA,QAJW;IAKX4B,IAAI,EAAE;MACJC,aAAa,EAAEC,aAAA,CAAKC,EAAL,EADX;MAEJN,KAAK,EAALA,KAFI;MAGJO,SAAS,EAAE;IAHP;EALK,CAAb;EAWA,IAAM/C,GAAG,aAAMjB,QAAN,cAAkB+B,sBAAlB,cAAiCC,QAAjC,cAA6CiC,6BAA7C,CAAT;EAEA,OAAO;IACL9C,MAAM,EAAEC,qBAAA,CAAW8C,IADd;IAELjD,GAAG,EAAHA,GAFK;IAGLD,IAAI,EAAJA;EAHK,CAAP;AAKD,CArBD;;AAuBAnB,WAAW,CAACsE,wBAAZ,GAAuC,UAACpE,OAAD,EAAUC,QAAV;EAAA,OAAwB;IAC7DD,OAAO,EAAPA,OAD6D;IAE7DC,QAAQ,EAARA;EAF6D,CAAxB;AAAA,CAAvC;;AAKAH,WAAW,CAACuE,iCAAZ,GAAgD,UAAC/D,OAAD,EAAa;EAC3D,IAAMW,IAAI,GAAG;IACXqD,UAAU,EAAEC,mBADD;IAEXhE,QAAQ,EAAE,CACR;MACEC,OAAO,EAAEF,OAAO,CAACN,OAAR,CAAgBW;IAD3B,CADQ;EAFC,CAAb;EAQA,IAAMa,aAAa,GAAG;IACpBJ,MAAM,EAAEC,qBAAA,CAAWC,GADC;IAEpBJ,GAAG,EAAEZ,OAAO,CAACL,QAFO;IAGpBgB,IAAI,EAAJA;EAHoB,CAAtB;EAMA,OAAOO,aAAP;AACD,CAhBD;;eAkBe1B,W"}