{"version":3,"names":["BrowserDetection","isBrowser","MediaUtil","createPeerConnection","turnServerInfo","config","iceServers","push","urls","url","username","credential","password","bundlePolicy","window","RTCPeerConnection","createMediaStream","tracks","LoggerProxy","logger","error","filtredTracks","filter","element","MediaStream"],"sources":["util.js"],"sourcesContent":["/* globals MediaStream */\nimport window from 'global/window';\n\nimport BrowserDetection from '../common/browser-detection';\nimport LoggerProxy from '../common/logs/logger-proxy';\n\nconst {isBrowser} = BrowserDetection();\n\nconst MediaUtil = {};\n\nMediaUtil.createPeerConnection = (turnServerInfo) => {\n  const config = {iceServers: []};\n\n  if (turnServerInfo) {\n    config.iceServers.push({\n      urls: turnServerInfo.url,\n      username: turnServerInfo.username || '',\n      credential: turnServerInfo.password || ''\n    });\n  }\n  if (isBrowser('firefox')) {\n    config.bundlePolicy = 'max-compat';\n  }\n\n  return new window.RTCPeerConnection(config);\n};\n\n\nMediaUtil.createMediaStream = (tracks) => {\n  if (!tracks) {\n    LoggerProxy.logger.error('Media:util#createMediaStream --> Tracks don\\'t exist');\n  }\n  const filtredTracks = tracks.filter((element) => !!element);\n\n  return new MediaStream(filtredTracks);\n};\n\nexport default MediaUtil;\n"],"mappings":";;;;;;;;;;;;AACA;;AAEA;;AACA;;AAJA;AAMA,wBAAoB,IAAAA,yBAAA,GAApB;AAAA,IAAOC,SAAP,qBAAOA,SAAP;;AAEA,IAAMC,SAAS,GAAG,EAAlB;;AAEAA,SAAS,CAACC,oBAAV,GAAiC,UAACC,cAAD,EAAoB;EACnD,IAAMC,MAAM,GAAG;IAACC,UAAU,EAAE;EAAb,CAAf;;EAEA,IAAIF,cAAJ,EAAoB;IAClBC,MAAM,CAACC,UAAP,CAAkBC,IAAlB,CAAuB;MACrBC,IAAI,EAAEJ,cAAc,CAACK,GADA;MAErBC,QAAQ,EAAEN,cAAc,CAACM,QAAf,IAA2B,EAFhB;MAGrBC,UAAU,EAAEP,cAAc,CAACQ,QAAf,IAA2B;IAHlB,CAAvB;EAKD;;EACD,IAAIX,SAAS,CAAC,SAAD,CAAb,EAA0B;IACxBI,MAAM,CAACQ,YAAP,GAAsB,YAAtB;EACD;;EAED,OAAO,IAAIC,eAAA,CAAOC,iBAAX,CAA6BV,MAA7B,CAAP;AACD,CAfD;;AAkBAH,SAAS,CAACc,iBAAV,GAA8B,UAACC,MAAD,EAAY;EACxC,IAAI,CAACA,MAAL,EAAa;IACXC,oBAAA,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,sDAAzB;EACD;;EACD,IAAMC,aAAa,GAAGJ,MAAM,CAACK,MAAP,CAAc,UAACC,OAAD;IAAA,OAAa,CAAC,CAACA,OAAf;EAAA,CAAd,CAAtB;EAEA,OAAO,IAAIC,WAAJ,CAAgBH,aAAhB,CAAP;AACD,CAPD;;eASenB,S"}