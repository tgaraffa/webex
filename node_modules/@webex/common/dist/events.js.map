{"version":3,"names":["proxyEvents","emitter","proxy","forEach","key","transferEvents","events","source","drain","event","on","args","emit","target","method","trigger","Error","rest"],"sources":["events.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {isArray} from 'lodash';\n\n/**\n * Proxies the event binding methods of emitter onto proxy\n * @param {EventEmitter|EventEmitterProxy} emitter\n * @param {mixed} proxy (probably a promise)\n * @returns {EventEmitter} Returns the source emitter to ease use in promise chains\n */\nexport function proxyEvents(emitter, proxy) {\n  [\n    'on',\n    'once'\n  ].forEach((key) => {\n    proxy[key] = (...args) => {\n      emitter[key](...args);\n\n      return proxy;\n    };\n  });\n\n  return emitter;\n}\n\n/**\n * Given a list of events, fires them on drain when they're emitted from source\n * @param {Array|string} events\n * @param {EventEmitter} source\n * @param {EventEmitter} drain\n * @returns {undefined}\n */\nexport function transferEvents(events, source, drain) {\n  events = isArray(events) ? events : [events];\n  events.forEach((event) => {\n    if (source.on) {\n      source.on(event, (...args) => emit(drain, event, ...args));\n    }\n  });\n}\n\n/**\n * Emits an event\n * @param {EventEmitter} target The EventEmitter from which to emit an event\n * @returns {mixed}\n */\nfunction emit(target, ...rest) {\n  const method = target.trigger || target.emit;\n\n  /* istanbul ignore if */\n  if (!method) {\n    throw new Error('count not determine emit method');\n  }\n\n  return Reflect.apply(method, target, rest);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,WAAT,CAAqBC,OAArB,EAA8BC,KAA9B,EAAqC;EAC1C,CACE,IADF,EAEE,MAFF,EAGEC,OAHF,CAGU,UAACC,GAAD,EAAS;IACjBF,KAAK,CAACE,GAAD,CAAL,GAAa,YAAa;MACxBH,OAAO,CAACG,GAAD,CAAP,OAAAH,OAAO,YAAP;MAEA,OAAOC,KAAP;IACD,CAJD;EAKD,CATD;EAWA,OAAOD,OAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASI,cAAT,CAAwBC,MAAxB,EAAgCC,MAAhC,EAAwCC,KAAxC,EAA+C;EACpDF,MAAM,GAAG,uBAAQA,MAAR,IAAkBA,MAAlB,GAA2B,CAACA,MAAD,CAApC;EACAA,MAAM,CAACH,OAAP,CAAe,UAACM,KAAD,EAAW;IACxB,IAAIF,MAAM,CAACG,EAAX,EAAe;MACbH,MAAM,CAACG,EAAP,CAAUD,KAAV,EAAiB;QAAA,kCAAIE,IAAJ;UAAIA,IAAJ;QAAA;;QAAA,OAAaC,IAAI,MAAJ,UAAKJ,KAAL,EAAYC,KAAZ,SAAsBE,IAAtB,EAAb;MAAA,CAAjB;IACD;EACF,CAJD;AAKD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,IAAT,CAAcC,MAAd,EAA+B;EAC7B,IAAMC,MAAM,GAAGD,MAAM,CAACE,OAAP,IAAkBF,MAAM,CAACD,IAAxC;EAEA;;EACA,IAAI,CAACE,MAAL,EAAa;IACX,MAAM,IAAIE,KAAJ,CAAU,iCAAV,CAAN;EACD;;EAN4B,mCAANC,IAAM;IAANA,IAAM;EAAA;;EAQ7B,OAAO,oBAAcH,MAAd,EAAsBD,MAAtB,EAA8BI,IAA9B,CAAP;AACD"}